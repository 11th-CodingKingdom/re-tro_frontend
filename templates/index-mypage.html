<!doctype html>
<html lang="ko">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="RE:TRO | 그때 그 시절, 당신의 음악"/>

    <title>RE:TRO | 그때 그 시절, 당신의 음악</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script defer src="../static/js/mypage.js"></script>

    <link rel="stylesheet" type="text/css" href="../static/css/reset.css">
    <link rel="stylesheet" type="text/css" href="../static/css/style-mypage.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <script>
        $(document).ready(function () {
            loginStatus();
            retroChart()
        });

        function loginStatus() {
            let userID = "{{ session['userID']}}"
            let loginText = ""
            let href_login_out = ""
            if (userID == "") {
                login_logout = "로그인"
                regist_mypage = "회원가입"
                href_login_out = "/login_page"
            } else {
                login_logout = "로그아웃"
                regist_mypage = "마이페이지"
                href_login_out = "/logout"
            }
            let login_html = `<ul>
                                <li><a href="#">RE:TRO 소개</a></li>
                                <li><a href='/regist_page'>${regist_mypage}</a></li>
                                <li><a href=${href_login_out}>${login_logout}</a></li>
                              </ul>`
            $('#nav_right').append(login_html)
        }

        function retroChart() {
            let chart_year = '2010'
            $.ajax({
                type: 'GET',
                url: '/main/chart',
                data: {'chart_year': chart_year},
                success: function (response) {
                    let music_list = response['music_list']
                    for (let i = 0; i < 6; i++) {
                        let albumImageUrl = music_list[i]['albumImageUrl']
                        let singer = music_list[i]['singer']
                        let title = music_list[i]['title']
                        let rankchart_html = `<tr class="rankchart-row-box table_line">
                                    <td>
                                        <div id="rankchart_img">
                                            <img src='${albumImageUrl}' width="50px" height="50px"
                                                 style="border-radius:10px"/>
                                        </div>
                                    </td>
                                    <td>
                                        <div id="rankchart_song">${title}</div>
                                    </td>
                                    <td>
                                        <div id="rankchart_artist">${singer}</div>
                                    </td>
                                    <td>
                                        <button type="button">
                                            <img src="../static/images/palybn_icon_red_hover.png" alt=""
                                                 class="playbtn">
                                        </button>
                                    </td>
                                    <td>
                                        <button type="button">
                                            <img src="../static/images/like_icon_hover.png" alt="" id="likebtn"
                                                 onclick="toggleLike()">
                                        </button>
                                    </td>
                                </tr>`
                        if (i < 3) {
                            $('#rankchart-table').append(rankchart_html)
                        } else {
                            $('#rankchart-table').append(rankchart_html)
                        }
                    }

                }
            });
        }

        function showPopup() {
            window.open("index-mypage-popup.html", "a", "width=400, height=300, left=100, top=50");
        }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
          rel="stylesheet">

    <link rel="shortcut icon" href="../favicon.ico">

</head>
<body>
<header id="header">
    <div id="logo" onclick="location.href='#'">
        <img src="../static/images/reteo_logo.png" width="91px" height="26px"/>
    </div>
    <nav id="nav">
        <div id="nav_left">
            <ul>
                <!-- 성향테스트 -->
                <li><a href="#">음악성향테스트</a></li>
                <li><a href="#">보관함</a></li>
            </ul>
        </div>
        <div id="searchbox_wrap">
            <img src="../static/images/search_icon.png" alt="">
            <input type="text" id="searchbox" placeholder="검색어를 입력하세요.">
        </div>
        <div id="nav_right">
        </div>
    </nav>
</header>
<div class="mypage_hello">
    <!-- 회원 이름 -->
    안녕하세요, <span>임세민</span>&nbsp;님!
</div>
<div id="wrap">
    <div id="mypage_left">
        <div id="left_box">
            <!-- 회원 이메일 -->
            <div id="user_email">glaemfek@gmail.com</div>
            <input type="button" id="userinfo_edit_btn" value="수정하기" onclick="showPopup();">
        </div>
        <div id="logout-btn"><span>로그아웃</span></div>
    </div>
    <div id="mypage_right">
        <div class="music_test_banner">
            <div class="music_test_img">
                <img src="../static/images/.png" alt="">
            </div>
            <div class="music_test_left">
                <div class="music_test_txt">
                    <span class="test_left_top test_text">나의 음악 성향 테스트 결과는?</span>
                    <span class="test_left_middle test_text">감성 타입</span>
                    <span class="test_left_bottom test_text">꿀음색에 감성 촉촉한 팝 & 발라드</span>
                </div>
            </div>
            <div class="music_test_middle">
                <div class="music_test_txt">
                    <!-- 성향테스트 타입 / 회원이름 / 성향테스트 추천노래 -->
                    <span class="test_middle_top test_text"><span class="type">감성타입&nbsp;임세민</span>&nbsp;님의 추천 음악</span>
                    <span class="test_middle_bottom test_text">보고싶다</span>
                </div>
            </div>
            <div class="music_test_right">
                <!-- 성향테스트 추천노래 유튜브링크 -->
                <div class="music_test_btn">추천 음악 바로 가기</div>
            </div>
        </div>
        <div id="chart">
            <div id="chart-body">
                <div id="year-btn" class="chart_text">
                    <!-- 연도별 노래 차트 -->
                    <input type="button" class="btn" value="1980"/>
                    <input type="button" class="btn" value="1990"/>
                    <input type="button" class="btn" value="2000"/>
                    <input type="button" class="btn" value="2010"/>
                </div>
                <h1 class="chart_text">MY 플레이리스트</h1>
                <div id="section_rankchart">
                    <div id="rankchart-box">
                        <table id="rankchart-table" class="chart_text">
                            <thead>
                            <tr>
                                <th scope="col" class="info">곡</th>
                                <th scope="col" class="song"></th>
                                <th scope="col" class="artist">아티스트</th>
                                <th scope="col" class="listen">듣기</th>
                                <th scope="col" class="like">좋아요</th>
                            </tr>
                            </thead>
                            <tbody id="rankchart-row">
                            <tr class="rankchart-row-box table_line">
                                <td>
                                    <div id="rankchart_img">
                                        <img src='${albumImageUrl}' width="50px" height="50px"
                                             style="border-radius:10px"/>
                                    </div>
                                </td>
                                <td>
                                    <div id="rankchart_song">INVU</div>
                                </td>
                                <td>
                                    <div id="rankchart_artist">태연</div>
                                </td>
                                <td>
                                    <!-- 재생버튼 -->
                                    <button type="button">
                                        <img src="../static/images/palybn_icon_red_hover.png" alt=""
                                             class="playbtn">
                                    </button>
                                </td>
                                <td>
                                    <!-- 좋아요 버튼 -->
                                    <button type="button">
                                        <img src="../static/images/like_icon_hover.png" alt="" id="likebtn"
                                             onclick="toggleLike()">
                                    </button>
                                </td>
                            </tr>
                            <tr class="rankchart-row-box table_line">
                                <td>
                                    <div id="rankchart_img">
                                        <img src='${albumImageUrl}' width="50px" height="50px"
                                             style="border-radius:10px"/>
                                    </div>
                                </td>
                                <td>
                                    <div id="rankchart_song">INVU</div>
                                </td>
                                <td>
                                    <div id="rankchart_artist">태연</div>
                                </td>
                                <td>
                                    <button type="button">
                                        <img src="../static/images/palybn_icon_red_hover.png" alt=""
                                             class="playbtn">
                                    </button>
                                </td>
                                <td>
                                    <button type="button">
                                        <img src="../static/images/like_icon_hover.png" alt="" id="likebtn"
                                             onclick="toggleLike()">
                                    </button>
                                </td>
                            </tr>
                            <tr class="rankchart-row-box table_line">
                                <td>
                                    <div id="rankchart_img">
                                        <img src='${albumImageUrl}' width="50px" height="50px"
                                             style="border-radius:10px"/>
                                    </div>
                                </td>
                                <td>
                                    <div id="rankchart_song">INVU</div>
                                </td>
                                <td>
                                    <div id="rankchart_artist">태연</div>
                                </td>
                                <td>
                                    <button type="button">
                                        <img src="../static/images/palybn_icon_red_hover.png" alt=""
                                             class="playbtn">
                                    </button>
                                </td>
                                <td>
                                    <button type="button">
                                        <img src="../static/images/like_icon_hover.png" alt="" id="likebtn"
                                             onclick="toggleLike()">
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<!-- FOOTER -->
<hr size="1" color="#eeeeee">
<footer>
    <div id="footer_logo">
        <img src="../static/images/logo_footer.png"/>
    </div>
    <div id="footer_desc">
        Copyrights © 2022 - Coding Kingdom Team, All Rights Reserved.
    </div>
    <!-- 하단 재생 바 -->
    <div class="playbar">
        <div class="playbar_song">
            <div class="youtube_movie"></div>
            <div class="playbar_song_wrap">
                <div class="playbar_song_title">인생 한잔</div>
                <div class="playbar_song_artist">정은지</div>
            </div>
            <img src="../static/images/like_icon.png" alt="" id="likebtn" onclick="toggleLike()">
        </div>
        <img src="../static/images/palybn_icon.png" alt="" class="playbtn">
    </div>
</footer>
</body>

</html>